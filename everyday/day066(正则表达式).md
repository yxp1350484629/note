# day066(正则表达式)

re模块

re模块有几个重要的函数，首先就是complie函数

这个函数可以生成一个正则表达式对象，这个正则表达式对象里有了给的正则表达式模板，它可以直接调用re模块中的函数，而不用再给正则表达式参数，以及flags参数

它主要有两个参数，第一个就是正则表达式参数，第二个就是标志位flags

记住所有的re模块的函数都有flags这个参数，这个参数设计到之前poll中的位，根据这个参数的值不同，有不同的功能

正则表达式对象有四个属性，第一个就是flags，可以complie函数中给的flags,第二个参数就是pattern,可以访问complie中给的正则表达式，第三个参数是groups，可以得到正则表达式中有多少子组，第四个参数groupindex

可以访问每个子组的名字，和顺序号，由于子组有顺序，从外到内，从左到右排序，返回的是名字为键，顺序号为值的字典

正则表达式和re模块都可以调用函数。

所以findall,split,sub,subn,finditer,fullmatch,match,search都是它们可以调用的函数，注意用re调用这些函数中都要给flags参数，而用正则表达式对象调用就不需要给flags参数了

findall函数，如果是re模块调用，有三个参数， 正则表达式，目标字符串，flags，注意findall函数在正则表达式没有子组时，返回所有匹配到的内容，而有子组时，只返回子组匹配到的内容，返回的是列表中的元组，整体匹配到几处就返回几个元组，元组中是子组匹配到的内容

如果是正则表达式对象regex调用findall函数，有三个参数，目标字符串，开头位置，结束位置，开头结束位置都采用索引值传参的意思，和列表切片一样，如果传1，3，就可以对目标字符串的序列值为1,2的进行匹配。而有子组时，也只返回子组匹配到的内容

只有findall函数用re,正则表达式调用时会有参数大变化，其他的函数调用只是一个正则表达式参数有无的变化，下面主要就讲述re了

split函数

可以用正则表达式来将目标字符串切割，返回到的是切割后的内容，不再是匹配到的内容，相当于将匹配到的内容丢掉，返回剩下的内容，跟split切割字符串差不多

re模块调用split，参数为正则表达式，目标字符串和flags

sub函数

可以用正则表达式匹配到内容，然后将这个内容换成自己想换的内容，然后返回整个字符串

参数为正则表达式，想要替换的内容replaceStr，目标字符串，想要替换的最大次数max，flags

返回值为替换后的字符串

subn函数

和sub函数唯一的不同是返回值是一个元组，元组里包含替换后的字符串，以及替换的次数

接下来的四个函数都是可以返回match对象的，match对象中有特殊的属性

finditer函数，参数pattern,string,flags

返回一个迭代对象，可以迭代出一个个match对象，用正则表达式匹配到几处内容，就有几个match对象，match对象可以通过group()返回匹配到的内容，可以通过group(顺序号)访问子组匹配到的内容，当然还有更多的属性

fullmatch函数，参数pattern,string,flags

主要作用是为了完全匹配目标字符串，也就是绝对匹配，就不用在在正则表达式中前后加特殊字符来完成，就可以通过这个函数来完成，如果目标字符串被完全匹配，就会返回一个match对象，不能完全匹配就会返回None

注意我们一般用这个函数都会用到异常捕获，因为None对象没有那些属性，如果我们在代码中用到这些属性，就会发生属性错误，这个时候我们可以用AttributeError来捕获

match函数，参数pattern,string,flags

从开头位置匹配字符串，也就是匹配到的字符串必须是从开头位置开始，相当于之前的r'^...'，这个不需要正则表达式写成这样，函数会判定，只要不是从目标字符串开头匹配到的，也会返回None

search函数，参数pattern,string,flags

这个函数无论怎样，只会匹配一处，从左到右，只会匹配一处，然后返回一个match对象



match对象属性

每个match对象是每匹配一处内容返回的对象

属性变量

pos 要进行匹配的目标字符串的开始位置 默认为0

endpos 要进行匹配的目标字符串的结束位置，注意在python中结束位置都是最大序列值+1

我们在使用能生成match对象的函数时，都可以将这两个属性传进去，定义要匹配的目标字符串的开始和结尾

re 正则表达式

string 目标字符串

lastgroup 是正则表达式最后一个子组的组名

lastindex 是正则表达式最后一个子组的顺序值，子组顺序值从一开始

属性方法

start() 是匹配到的内容开始位置是目标字符串的那个位置

end() 是匹配到的内容的结束位置是目标字符串的那个位置

span() 是匹配到的内容的开始和结尾 用元组里面包含start()，end()的返回结果

group()默认为0,返回匹配到的内容，可以通过顺序值或子组名访问子组匹配的内容

groups() 返回的就是所有元组匹配到的内容，用元组包裹

groupdict() 只有子组有名字，这个函数才有返回值，返回的是字典，键位子组名，值为该子组匹配到的内容，多个子组就有多个键值对



flags参数，主要功能是丰富正则表达式的功能

flags参数的主要取值是re模块中的几个属性

I=IGNORECASE 在匹配时忽略大小写，就是大小写都可以匹配上

S=DOTALL 这个是针对元字符.的，.可以匹配任意字符，除了换行符，这个是让.可以匹配换行符

M=MULTILINE 这个是让^,$可以匹配目标字符串每一行的开头和结尾，而不是一整个的开头和结尾

可以通过字母来访问，也可以通过单词来访问，赋值是flags=re.

如果我们想给flags添加多个参数，因为是按标志位运算的，可以re.I|re.S 这样就添加两个功能，按位或运算

