# day068(项目和总结2)

1.pdb调试

是可以调试每一行代码的方法，具体用处在找不到错误，需要一行一行调试，或者是找到错误在哪一块，或者查看运行到某个地方变量的值

我们可以在代码里添加pdb.set_trace()那么代码运行到这里的时候就会执行pdb调试，注意要调试的就是pdb.set_trace()下面的程序

或者是一开始就用调式模式来运行程序，就会从第一行开始调试，

进入调试后可以输入选项来进行调试，调试模式显示的永远是要即将运行的程序

b 设置断点，后面接行数，这个一般和c配合着用，c是从现在调试初开始，一直运行下去，如果有断点就运行到断点处，显示结果，没有就会运行完显示结果

n 单步执行 和c不同的是，n是每次运行一行显示具体的结果

s 单步执行，可以进入要函数内部查看细节，就是在某处调用了一个函数，用s来调试，就可以不断输入s来进入运行时函数内部是怎么运行的

l 可以查看某个函数的代码段，调试模式运行到某个函数时可以用这个查看

pp 后面接变量，可以查看调试模式运行到的地方，所拥有的变量值，注意后面没有运行到的地方的变量无法显示

q 退出调试模式

一般调试模式在调试自己不太熟悉的代码会很有用，或者自己的代码找不出错误所在可以用。

2.深度分析python中的函数(类)传参问题

```python
class Lo(object):
    def lp(self):
        a=1
        self.li()
    def li(self):
        print(a) 
p=Lo()
p.li()
NameError: name 'a' is not defined
这个很明显，在python运行代码时，会将函数类，以及全局变量先加载一遍，创建独立的变量空间，而函数li中并没有局部变量a,全局变量也找不到a，所以在函数中无法使用a，虽说是在lp函数中运行的，lp中有a，可是这两个函数属于不同的小空间，也不是嵌套关系。所以这个代码在加载确认变量的时候就会报错，在li以及全局变量中找不到a.要想让它不报错，须在li中赋值a，或者有全局变量a拿来使用，或者定义li函数定义一个参数a,因为定义了参数就有了局部变量a，传参就可以绑定任何对象，对象之间是没有变量之间那么多限制的。
```

```python
a=7
class Lo(object):
    def lp(self):
        a=1
        self.li()
    def li(self):
        a+=1
        print(a) 
p=Lo()
p.li()
UnboundLocalError: local variable 'a' referenced before assignment
这个出现了局部变量与全局变量混淆的错误
我们可以在类中或者函数中，直接使用全局变量。但是，不能采用赋值之类的操作来改变全局变量（对于列表来说可以去通过方法改变),比如这个，这个a+=1，a可以找到是全局变量，a=a+1 ，这个又是赋值创建局部变量，但是使用的又是全局变量，在python的一个变量域内，只能出现一个相同符号的局部变量或者是全局变量，也就是在这个小空间里，要么用的都是局部变量a，要么用的都是全局变量a。你可以直接拿全局变量过来用，但是你用了之后，在后面若是想改变全局变量或是创建与之相同符号名的局部变量就会报错，要是想改变全局变量值，就必须声明global 全局变量，声明这始终对全局变量进行操作，不创建局部变量。因为在函数中任何一个改变全局变量的操作都会是想要创建局部变量
```

**我们导入模块等也是全局变量，可以直接在函数中用，但是我们从来用了之后，想要改变模块名之类的意思，所以不会报错，除了模块等全局变量在函数类中使用，最好采用传参的方式。**

3.httpserver项目

项目心得:

1.在我们做的每一个功能模块，都是可以定义配置文件的，比如mysql中很多操作你不需要给值，系统默认已经给你写好值，传了进去，你需要更改可以手动改，可以在配置文件中改。

2.而python的配置文件里，一定就是定义的一些变量，我们可以导入成为全局变量，这样在主模块中可以随意在任何地方去用，也可以去改变值，传入的时候直接传这个变量名。

